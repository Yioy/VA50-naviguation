<launch>

  <arg name="config_file_arg" default="$(find bringup)/config/circulation4-2.yml"/>
  <arg name="no_lights_arg" default="true"/>
  <arg name="no_signs_arg" default="true"/>
  <arg name="no_directions_arg" default="true"/>

  <arg name="launch_trafficsigns" default="false" />
  <arg name="launch_control" default="false" />

  <env name="ROSCONSOLE_FORMAT" value="[${severity}] [${node}]: ${message}"/>

  <!-- Node for transformtrack -->
  <node pkg="transformtrack" type="transformtrack_node" name="transform_batch_server" output="screen" />

  <!-- Node for circulation -->
  <include file="$(find bringup)/launch/circulation.launch">
      <arg name="config_file_arg" value="$(arg config_file_arg)" />
  </include>

  <!-- Argument to control whether to launch trafficsigns node -->
  <group if="$(arg launch_trafficsigns)">
    <include file="$(find bringup)/launch/distance_extractor.launch">
      <arg name="config_file_arg" value="$(arg config_file_arg)" />
      <arg name="no_lights_arg" value="$(arg no_lights_arg)" />
      <arg name="no_signs_arg" value="$(arg no_signs_arg)" />
      <arg name="no_directions_arg" value="$(arg no_directions_arg)" />
    </include>
  </group>

  <!-- Argument to control whether to launch control node -->
  <group if="$(arg launch_control)">
    <node pkg="control" type="control.py" name="control_node" output="screen"/>
  </group>

</launch>